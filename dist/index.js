module.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PartlyRecognized="partly-recognized",e.FullyRecognized="recognized",e.VoicesReady="voices-ready",e.PermissionStatusReady="permissions-ready",e.Ready="ready"}(n||(n={})),t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;const n=i(2),s=i(0);t.Events=s.default,t.default=n.default},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{u(n.next(e))}catch(e){r(e)}}function a(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i(3),r=i(0),o=i(6),a=i(7),u=i(8);class l{constructor(e){this.eventTarget=new EventTarget,this.isRecognitionActive=!1,e=Object.assign(Object.assign({},u.defaultFeatures),e),this.silent=e.silent,this.ready=this.detectFeatures(e),this.ready?(e.recognition&&(this.recognizer.continuous=u.recognizerDefaults.continuous,this.recognizer.interimResults=u.recognizerDefaults.interimResults,this.recognizer.lang=u.recognizerDefaults.lang,this.recognizer.onresult=e=>{const t=e.results[e.resultIndex];t.isFinal?this.fullyRecognized(t[0].transcript):this.partlyRecognized(t[0].transcript),this.isRecognitionActive=!1}),Promise.all([new Promise((t,i)=>{e.synthesis?this.getVoices().then(e=>{this.voices=e,this.activeVoice=e[0],this.dispatch(r.default.VoicesReady,this.voices),t()}).catch(()=>{this.throw(s.default.UnableGetVoices),i()}):t()}),new Promise((t,i)=>{e.recognition?this.getPermissionStatus().then(e=>{this.permissionStatus=e.state,this.dispatch(r.default.PermissionStatusReady,this.permissionStatus)}).catch(()=>{this.throw(s.default.NotSupportPermissions),i()}):t()})]).then(()=>{this.dispatch(r.default.Ready)}).catch(()=>{this.throw(s.default.InstanceNotCreated)})):this.throw(s.default.InstanceNotCreated)}dispatch(e,t){this.eventTarget.dispatchEvent(new o.default(e,t))}on(e,t,i){this.eventTarget.addEventListener(e,t,i)}throw(e){this.silent||e.throw()}detectFeatures(e){var t,i;const n=l.availableFeatures;if(e.translation){if(!n.translation)return this.throw(s.default.NotSupportFetch),!1;this.fetch=self.fetch.bind(self)}if(e.synthesis){if(!n.synthesis)return this.throw(s.default.NotSupportSynthesis),!1;this.synthesizer=self.speechSynthesis}if(e.recognition){if(!n.recognition)return this.throw(s.default.NotSupportRecognition),!1;this.recognizer=new(self.webkitSpeechRecognition||self.speechRecognition),this.permissions=null===(t=self.navigator)||void 0===t?void 0:t.permissions,this.mediaDevices=null===(i=self.navigator)||void 0===i?void 0:i.mediaDevices}return!0}static get availableFeatures(){var e,t;return{recognition:!(!self.speechRecognition&&!self.webkitSpeechRecognition||!(null===(e=self.navigator)||void 0===e?void 0:e.mediaDevices)||!(null===(t=self.navigator)||void 0===t?void 0:t.permissions)),translation:!!self.fetch,synthesis:!!self.speechSynthesis}}getVoices(){return n(this,void 0,void 0,(function*(){let e,t=0;return new Promise((i,n)=>{e=setInterval(()=>{t>=100&&(clearInterval(e),n());const s=this.synthesizer.getVoices();(null==s?void 0:s.length)&&(clearInterval(e),i(s.map((e,t)=>new a.default(t,e)))),t+=1},10)})}))}getPermissionStatus(e=u.permissionsQueryDefault){return n(this,void 0,void 0,(function*(){return this.permissions.query(e)}))}requestPermission(e=u.mediaStreamConstraintsDefault){return n(this,void 0,void 0,(function*(){try{return this.mediaStream=yield this.mediaDevices.getUserMedia(e),this.permissionStatus=(yield this.getPermissionStatus()).state,this.mediaStream}catch(e){this.permissionStatus="denied",this.throw(s.default.PermissionDeclined)}}))}setActiveVoice(e){let t;return t="number"==typeof e?this.voices.find(t=>t.id===e):this.voices.find(t=>t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())||t.lang.toLocaleLowerCase().includes(e.toLocaleLowerCase())),t||(this.throw(s.default.WrongVoice),self.navigator.onLine||this.throw(s.default.DueToOffline)),this.activeVoice=t,t}get recognitionLang(){return this.recognizer.lang}set recognitionLang(e){this.recognizer.lang=e}speak(e){if(!e)return;const t=new SpeechSynthesisUtterance(e);t.voice=this.activeVoice.voice,this.synthesizer.speak(t)}translate(e,t){return n(this,void 0,void 0,(function*(){if(!e)return this.throw(s.default.NothingToTranslate),!1;if(!t)return this.throw(s.default.WrongLanguage),!1;if(!self.navigator.onLine)return this.throw(s.default.TranslationUnavilable),this.throw(s.default.DueToOffline),!1;const i=new URL(u.googleRequersDefaults.url);i.search=new URLSearchParams(Object.assign(Object.assign({},u.googleRequersDefaults.params),{tl:t,q:e})).toString();try{const e=yield this.fetch(i);if(!e.ok)return this.throw(s.default.TranslationError),!1;const t=yield e.json();return t[0]?t[0][0][0]:(this.throw(s.default.NothingToTranslate),!1)}catch(e){return this.throw(s.default.TranslationError),!1}}))}startRecognition(){if("granted"===this.permissionStatus)try{this.isRecognitionActive=!0,this.recognizer.start()}catch(e){this.throw(s.default.RecognitionActive)}else this.throw(s.default.PermissionDeclined)}stopRecognition(){this.isRecognitionActive=!1,this.recognizer.stop()}partlyRecognized(e){this.dispatch(r.default.PartlyRecognized,e)}fullyRecognized(e){this.dispatch(r.default.FullyRecognized,e),this.recognizer.continuous||(this.isRecognitionActive=!1)}}t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(4),s=i(5),r={NotSupportRecognition:new n.default(s.default.Error,"This browser does not support Speech Recognition feature."),NotSupportSynthesis:new n.default(s.default.Error,"This browser does not support Speech Synthesis feature."),NotSupportFetch:new n.default(s.default.Error,"This browser does not support Fetch feature."),NotSupportMedia:new n.default(s.default.Error,"This browser does not support Media Devices feature."),NotSupportPermissions:new n.default(s.default.Error,"This browser does not support Permissions feature."),InstanceNotCreated:new n.default(s.default.Error,"Instance was not created."),UnableGetVoices:new n.default(s.default.Error,"Unable to get voices."),WrongVoice:new n.default(s.default.Warn,"Wrong Voice ID."),TranslationUnavilable:new n.default(s.default.Warn,"Transtalion is unavailable."),TranslationError:new n.default(s.default.Warn,"Transtalion service error."),DueToOffline:new n.default(s.default.Warn,"This could be due to the fact that you're offline."),PermissionDeclined:new n.default(s.default.Warn,"User did not give permission."),RecognitionActive:new n.default(s.default.Warn,"Recognition already active."),NothingToTranslate:new n.default(s.default.Warn,"Nothing to translate."),WrongLanguage:new n.default(s.default.Warn,"Wrong translation language.")};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.type=e,this.message=t}throw(){const e=`[TranSpeech ${this.type}]: ${this.message}`;console[this.type](e)}}},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Error="error",e.Warn="warn"}(n||(n={})),t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Event{constructor(e,t){super(e),void 0!==typeof t&&(this.result=t)}}t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.id=e,this.name=t.name,this.lang=t.lang,this.offline=t.localService,this.voice=t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.googleRequersDefaults=t.mediaStreamConstraintsDefault=t.permissionsQueryDefault=t.recognizerDefaults=t.defaultFeatures=void 0;t.defaultFeatures={recognition:!0,synthesis:!0,translation:!0,silent:!1};t.recognizerDefaults={continuous:!0,interimResults:!0,lang:"en"};t.permissionsQueryDefault={name:"microphone"};t.mediaStreamConstraintsDefault={audio:!0};t.googleRequersDefaults={url:"https://translate.googleapis.com/translate_a/single",params:{client:"gtx",sl:"auto",dt:"t"}}}]);