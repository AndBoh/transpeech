module.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PartlyRecognized="partly-recognized",e.FullyRecognized="recognized",e.VoicesReady="voices-ready",e.PermissionStatusReady="permissions-ready",e.Ready="ready"}(s||(s={})),t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;const s=i(2),n=i(0);t.Events=n.default,t.default=s.default},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function o(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(3),r=i(0),o=i(6),a=i(7),u=i(8);class l{constructor(e,t){let i;this.eventTarget=new EventTarget,this.isRecognitionActive=!1,void 0!==e&&void 0!==t?(i=u.defaultFeatures,this.silent=!1):void 0!==t?(i=Object.assign(Object.assign({},u.defaultFeatures),e),this.silent=t):"boolean"==typeof e?(i=u.defaultFeatures,this.silent=e):(i=Object.assign(Object.assign({},u.defaultFeatures),e),this.silent=!1),this.ready=this.detectFeatures(i),this.ready?(this.recognizer=Object.assign(Object.assign({},this.recognizer),u.recognizerDefaults),Promise.all([this.getVoices().then(e=>{this.voices=e,this.activeVoice=e[0],this.dispatch(r.default.VoicesReady)}).catch(()=>{i.synthesis&&(this.silent||(n.default.UnableGetVoices.throw(),n.default.InstanceNotCreated.throw()))}),this.getPermissionStatus().then(e=>{this.permissionStatus=e.state,this.dispatch(r.default.PermissionStatusReady)}).catch(()=>{this.silent||(n.default.NotSupportPermissions.throw(),n.default.InstanceNotCreated.throw())})]).then(()=>{this.dispatch(r.default.Ready)}),this.recognizer.onresult=e=>{const t=e.results[e.resultIndex];t.isFinal?this.fullyRecognized(t[0].transcript):this.partlyRecognized(t[0].transcript)}):this.silent||n.default.InstanceNotCreated.throw()}dispatch(e,t){this.eventTarget.dispatchEvent(new o.default(e,t))}on(e,t,i){this.eventTarget.addEventListener(e,t,i)}detectFeatures(e){const t=l.availableFeatures;return e.fetch&&!t.fetch?(this.silent||n.default.NotSupportFetch.throw(),!1):(t.fetch&&(this.fetch=t.fetch.bind(self)),e.mediaDevices&&!t.mediaDevices?(this.silent||n.default.NotSupportMedia.throw(),!1):(t.mediaDevices&&(this.mediaDevices=t.mediaDevices),e.permissions&&!t.permissions?(this.silent||n.default.NotSupportPermissions.throw(),!1):(t.permissions&&(this.permissions=t.permissions),e.recognition&&!t.recognition?(this.silent||n.default.NotSupportRecognition.throw(),!1):(t.recognition&&(this.recognizer=new t.recognition),e.synthesis&&!t.synthesis?(this.silent||n.default.NotSupportSynthesis.throw(),!1):(t.synthesis&&(this.synthesizer=t.synthesis),!0)))))}static get availableFeatures(){var e,t;return{recognition:self.speechRecognition||self.webkitSpeechRecognition,fetch:self.fetch,synthesis:self.speechSynthesis,mediaDevices:null===(e=self.navigator)||void 0===e?void 0:e.mediaDevices,permissions:null===(t=self.navigator)||void 0===t?void 0:t.permissions}}getVoices(){return s(this,void 0,void 0,(function*(){let e,t=0;return new Promise((i,s)=>{e=setInterval(()=>{t>=100&&(clearInterval(e),s());const n=this.synthesizer.getVoices();(null==n?void 0:n.length)&&(clearInterval(e),i(n.map((e,t)=>new a.default(t,e)))),t+=1},10)})}))}getPermissionStatus(e=u.permissionsQueryDefault){return s(this,void 0,void 0,(function*(){return this.permissions.query(e)}))}requestPermission(e=u.mediaStreamConstraintsDefault){return s(this,void 0,void 0,(function*(){try{return this.mediaStream=yield this.mediaDevices.getUserMedia(e),this.getPermissionStatus(),this.mediaStream}catch(e){this.silent||n.default.PermissionDeclined.throw()}}))}setActiveVoice(e){let t;return t="number"==typeof e?this.voices.find(t=>t.id===e):this.voices.find(t=>t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())||t.lang.toLocaleLowerCase().includes(e.toLocaleLowerCase())),t||this.silent||(n.default.WrongVoice.throw(),self.navigator.onLine||n.default.DueToOffline.throw()),this.activeVoice=t,t}get recognitionLang(){return this.recognizer.lang}set recognitionLang(e){this.recognizer.lang=e}speak(e){if(!e)return;const t=new SpeechSynthesisUtterance(e);t.voice=this.activeVoice.voice,this.synthesizer.speak(t)}translate(e,t){return s(this,void 0,void 0,(function*(){if(!e)return this.silent||n.default.NothingToTranslate.throw(),!1;if(!t)return this.silent||n.default.WrongLanguage.throw(),!1;if(!self.navigator.onLine)return this.silent||(n.default.TranslationUnavilable.throw(),n.default.DueToOffline.throw()),!1;const i=new URL(u.googleRequersDefaults.url);i.search=new URLSearchParams(Object.assign(Object.assign({},u.googleRequersDefaults.params),{tl:t,q:e})).toString();try{const e=yield this.fetch(i);if(!e.ok)return this.silent||n.default.TranslationError.throw(),!1;const t=yield e.json();return t[0]?t[0][0][0]:(this.silent||n.default.NothingToTranslate.throw(),!1)}catch(e){return this.silent||n.default.TranslationError.throw(),!1}}))}startRecognition(){"granted"===this.permissionStatus?this.isRecognitionActive?this.silent||n.default.RecognitionActive.throw():(this.isRecognitionActive=!0,this.recognizer.start()):this.silent||n.default.PermissionDeclined.throw()}stopRecognition(){this.isRecognitionActive&&(this.isRecognitionActive=!1,this.recognizer.stop())}partlyRecognized(e){this.dispatch(r.default.PartlyRecognized,e)}fullyRecognized(e){this.dispatch(r.default.FullyRecognized,e)}}t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(4),n=i(5),r={NotSupportRecognition:new s.default(n.default.Error,"This browser does not support Speech Recognition feature."),NotSupportSynthesis:new s.default(n.default.Error,"This browser does not support Speech Synthesis feature."),NotSupportFetch:new s.default(n.default.Error,"This browser does not support Fetch feature."),NotSupportMedia:new s.default(n.default.Error,"This browser does not support Media Devices feature."),NotSupportPermissions:new s.default(n.default.Error,"This browser does not support Permissions feature."),InstanceNotCreated:new s.default(n.default.Error,"Instance was not created."),UnableGetVoices:new s.default(n.default.Error,"Unable to get voices."),WrongVoice:new s.default(n.default.Warn,"Wrong Voice ID."),TranslationUnavilable:new s.default(n.default.Warn,"Transtalion is unavailable."),TranslationError:new s.default(n.default.Warn,"Transtalion service error."),DueToOffline:new s.default(n.default.Warn,"This could be due to the fact that you're offline."),PermissionDeclined:new s.default(n.default.Warn,"User did not give permission."),RecognitionActive:new s.default(n.default.Warn,"Recognition already active."),NothingToTranslate:new s.default(n.default.Warn,"Nothing to translate."),WrongLanguage:new s.default(n.default.Warn,"Wrong translation language.")};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.type=e,this.message=t}throw(){const e=`[TranSpeech ${this.type}]: ${this.message}`;console[this.type](e)}}},function(e,t,i){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Error="error",e.Warn="warn"}(s||(s={})),t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s extends Event{constructor(e,t){super(e),void 0!==typeof t&&(this.result=t)}}t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.id=e,this.name=t.name,this.lang=t.lang,this.offline=t.localService,this.voice=t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.googleRequersDefaults=t.mediaStreamConstraintsDefault=t.permissionsQueryDefault=t.recognizerDefaults=t.defaultFeatures=void 0;t.defaultFeatures={recognition:!0,synthesis:!0};t.recognizerDefaults={continuous:!0,interimResults:!0,lang:"en"};t.permissionsQueryDefault={name:"microphone"};t.mediaStreamConstraintsDefault={audio:!0};t.googleRequersDefaults={url:"https://translate.googleapis.com/translate_a/single",params:{client:"gtx",sl:"auto",dt:"t"}}}]);